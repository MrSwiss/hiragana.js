var ime={enable:function(h){var a=function(){var a=[],b=[];this.map=function(c,d){a.push(c.toLowerCase());b.push(d)};this.match=function(c){c=c.toLowerCase();for(var d=0;d<a.length;d++)if(a[d]==c)return b[d];return null};return this}(),l=!0;"undefined"!=typeof h&&!1===h.wideSpaces&&(l=h.wideSpaces);h=function(a){var b=a.target;8==a.keyCode&&("undefined"==typeof b.dataset.next||a.target.selectionStart!=a.target.selectionEnd?b.dataset.next="":""!=b.dataset.next&&(b.dataset.next=b.dataset.next.substring(0, b.dataset.next.length-1)));46==a.keyCode&&(b.dataset.next="")};var g=function(a,b){var c=a.selectionStart,d=a.selectionEnd;a.value=a.value.substring(0,c)+b+a.value.substring(d,a.value.length);a.selectionStart=c+b.length;a.selectionEnd=a.selectionStart},m=function(e){var b=e.target;if(b.selectionStart==b.selectionEnd){var c=String.fromCharCode(e.charCode);"undefined"==typeof b.dataset.next&&(b.dataset.next="");if(l&&" "==c)e.preventDefault(),g(b,"\u3000"),b.dataset.next="";else if(-1=="abcdefghijklmnopqrstuvwxyz".indexOf(c.toLowerCase()))b.dataset.next= "";else if(b.dataset.next+=c,c=a.match(b.dataset.next),null!=c){e.preventDefault();e=b.dataset.next;var d=b.selectionStart,f=b.selectionEnd;b.value=b.value.substring(0,d-(e.length-1))+b.value.substring(f,b.value.length);b.selectionStart=d-e.length+1;b.selectionEnd=b.selectionStart;g(b,c);-1!="abcdefghijklmnopqrstuvwxyz".indexOf(c.charAt(c.length-1))?b.dataset.next=c.charAt(c.length-1):b.dataset.next=""}}},n=function(e){var b=void 0;window.clipboardData&&window.clipboardData.getData?b=window.clipboardData.getData("Text"): e.clipboardData&&e.clipboardData.getData&&(b=e.clipboardData.getData("text/plain"));e.preventDefault();for(var c="",d=0;d<b.length;d++)if(" "==b.charAt(d))l?g(e.target,"\u3000"):g(e.target," "),c="";else{var c=c+b.charAt(d),f=a.match(c);null!=f&&(g(e.target,f),c="")}""!=c&&g(e.target,c);return!1};a.map("a","\u3042");a.map("i","\u3044");a.map("u","\u3046");a.map("e","\u3048");a.map("o","\u304a");a.map("ka","\u304b");a.map("ki","\u304d");a.map("ku","\u304f");a.map("ke","\u3051");a.map("ko","\u3053"); a.map("sa","\u3055");a.map("shi","\u3057");a.map("su","\u3059");a.map("se","\u305b");a.map("so","\u305d");a.map("ta","\u305f");a.map("chi","\u3061");a.map("tsu","\u3064");a.map("te","\u3066");a.map("to","\u3068");a.map("na","\u306a");a.map("ni","\u306b");a.map("nu","\u306c");a.map("ne","\u306d");a.map("no","\u306e");a.map("ha","\u306f");a.map("hi","\u3072");a.map("fu","\u3075");a.map("he","\u3078");a.map("ho","\u307b");a.map("ma","\u307e");a.map("mi","\u307f");a.map("mu","\u3080");a.map("me","\u3081"); a.map("mo","\u3082");a.map("ya","\u3084");a.map("yu","\u3086");a.map("yo","\u3088");a.map("ra","\u3089");a.map("ri","\u308a");a.map("ru","\u308b");a.map("re","\u308c");a.map("ro","\u308d");a.map("wa","\u308f");a.map("wo","\u3092");a.map("ga","\u304c");a.map("gi","\u304e");a.map("gu","\u3050");a.map("ge","\u3052");a.map("go","\u3054");a.map("za","\u3056");a.map("ji","\u3058");a.map("zu","\u305a");a.map("ze","\u305c");a.map("zo","\u305e");a.map("da","\u3060");a.map("de","\u3067");a.map("do","\u3069"); a.map("ba","\u3070");a.map("bi","\u3073");a.map("bu","\u3076");a.map("be","\u3079");a.map("bo","\u307c");a.map("pa","\u3071");a.map("pi","\u3074");a.map("pu","\u3077");a.map("pe","\u307a");a.map("po","\u307d");a.map("hu","\u3075");a.map("tu","\u3064");a.map("si","\u3057");a.map("ti","\u3061");a.map("kya","\u304d\u3083");a.map("kyu","\u304d\u3085");a.map("kyo","\u304d\u3087");a.map("sha","\u3057\u3083");a.map("shu","\u3057\u3085");a.map("sho","\u3057\u3087");a.map("cha","\u3061\u3083");a.map("chu", "\u3061\u3085");a.map("cho","\u3061\u3087");a.map("nya","\u306b\u3083");a.map("nyu","\u306b\u3085");a.map("nyo","\u306b\u3087");a.map("hya","\u3072\u3083");a.map("hyu","\u3072\u3085");a.map("hyo","\u3072\u3087");a.map("mya","\u307f\u3083");a.map("myu","\u307f\u3085");a.map("myo","\u307f\u3087");a.map("rya","\u308a\u3083");a.map("ryu","\u308a\u3085");a.map("ryo","\u308a\u3087");a.map("gya","\u304e\u3083");a.map("gyu","\u304e\u3085");a.map("gyo","\u304e\u3087");a.map("ja","\u3058\u3083");a.map("ju", "\u3058\u3085");a.map("jo","\u3058\u3087");a.map("bya","\u3073\u3083");a.map("byu","\u3073\u3085");a.map("byo","\u3073\u3087");a.map("pya","\u3074\u3083");a.map("pyu","\u3074\u3085");a.map("pyo","\u3074\u3087");a.map("xyu","\u3085");a.map("xyo","\u3087");a.map("xya","\u3083");a.map("xtsu","\u3063");a.map("xtu","\u3063");a.map("xa","\u3041");a.map("xi","\u3043");a.map("xu","\u3045");a.map("xe","\u3047");a.map("xo","\u3049");a.map("lyu","\u3085");a.map("lyo","\u3087");a.map("lya","\u3083");a.map("ltsu", "\u3063");a.map("ltu","\u3063");a.map("la","\u3041");a.map("li","\u3043");a.map("lu","\u3045");a.map("le","\u3047");a.map("lo","\u3049");a.map("rr","\u3063r");a.map("tt","\u3063t");a.map("kk","\u3063k");a.map("cc","\u3063c");a.map("pp","\u3063p");a.map("ss","\u3063s");a.map("ww","\u3063w");a.map("ss","\u3063y");a.map("dd","\u3063d");a.map("ff","\u3063f");a.map("gg","\u3063g");a.map("hh","\u3063h");a.map("jj","\u3063j");a.map("zz","\u3063z");a.map("xx","\u3063x");a.map("vv","\u3063v");a.map("bb","\u3063b"); a.map("mm","\u3063m");a.map("nn","\u3093");for(var f=0;21>f;f++)a.map("n"+"bcdfghjklmnpqrstvwxyz".charAt(f),"\u3093"+"bcdfghjklmnpqrstvwxyz".charAt(f));for(var k=function(a){for(var b=[],c=document.getElementsByTagName("*"),d=0;d<c.length;d++)c[d].getAttribute(a)&&b.push(c[d]);return b}("data-ime"),f=0;f<k.length;f++)"hiragana"==k[f].dataset.ime&&k[f].addEventListener("keypress",m,!1),k[f].addEventListener("keyup",h,!1),k[f].addEventListener("paste",n,!1)}};
