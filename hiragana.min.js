var ime={enable:function(e){var g=function(){var q=[];var i=[];this.map=function(r,s){q.push(r.toLowerCase());i.push(s)};this.match=function(s){s=s.toLowerCase();for(var r=0;r<q.length;r++){if(q[r]==s){return i[r]}}return null};return this};var b=g();var j="abcdefghijklmnopqrstuvwxyz";var p="bcdfghjklmnpqrstvwxyz";var n="aiueo";var o=true;if(typeof e!="undefined"){if(e.wideSpaces===false){o=e.wideSpaces}}var l=function(q){var i=q.target;if(q.keyCode==8){if(typeof i.dataset.next=="undefined"||q.target.selectionStart!=q.target.selectionEnd){i.dataset.next=""}else{if(i.dataset.next!=""){i.dataset.next=i.dataset.next.substring(0,i.dataset.next.length-1)}}}if(q.keyCode==46){i.dataset.next=""}};var m=function(r,q){var s=r.selectionStart;var i=r.selectionEnd;r.value=r.value.substring(0,s-(q.length-1))+r.value.substring(i,r.value.length);r.selectionStart=s-q.length+1;r.selectionEnd=r.selectionStart};var c=function(r,q){var s=r.selectionStart;var i=r.selectionEnd;r.value=r.value.substring(0,s)+q+r.value.substring(i,r.value.length);r.selectionStart=s+q.length;r.selectionEnd=r.selectionStart};var f=function(s){var r=s.target;if(s.ctrlKey){r.dataset.next="";return}if(r.selectionStart!=r.selectionEnd){return}var q=String.fromCharCode(s.charCode);if(typeof r.dataset.next=="undefined"){r.dataset.next=""}if(o&&q==" "){s.preventDefault();c(r,"　");r.dataset.next="";return}if(j.indexOf(q.toLowerCase())==-1){r.dataset.next="";return}r.dataset.next+=q;var i=b.match(r.dataset.next);if(i!=null){s.preventDefault();m(r,r.dataset.next);c(r,i);if(j.indexOf(i.charAt(i.length-1))!=-1){r.dataset.next=i.charAt(i.length-1)}else{r.dataset.next=""}}};var k=function(t){var u=undefined;if(window.clipboardData&&window.clipboardData.getData){u=window.clipboardData.getData("Text")}else{if(t.clipboardData&&t.clipboardData.getData){u=t.clipboardData.getData("text/plain")}}t.preventDefault();var q="";for(var s=0;s<u.length;s++){if(u.charAt(s)==" "){if(o){c(t.target,"　")}else{c(t.target," ")}q=""}else{q+=u.charAt(s);var r=b.match(q);if(r!=null){c(t.target,r);q=""}}}if(q!=""){c(t.target,q)}return false};var d=function(s){var t=[];var r=document.getElementsByTagName("*");for(var q=0;q<r.length;q++){if(r[q].getAttribute(s)){t.push(r[q])}}return t};b.map("a","あ");b.map("i","い");b.map("u","う");b.map("e","え");b.map("o","お");b.map("ka","か");b.map("ki","き");b.map("ku","く");b.map("ke","け");b.map("ko","こ");b.map("sa","さ");b.map("shi","し");b.map("su","す");b.map("se","せ");b.map("so","そ");b.map("ta","た");b.map("chi","ち");b.map("tsu","つ");b.map("te","て");b.map("to","と");b.map("na","な");b.map("ni","に");b.map("nu","ぬ");b.map("ne","ね");b.map("no","の");b.map("ha","は");b.map("hi","ひ");b.map("fu","ふ");b.map("he","へ");b.map("ho","ほ");b.map("ma","ま");b.map("mi","み");b.map("mu","む");b.map("me","め");b.map("mo","も");b.map("ya","や");b.map("yu","ゆ");b.map("yo","よ");b.map("ra","ら");b.map("ri","り");b.map("ru","る");b.map("re","れ");b.map("ro","ろ");b.map("wa","わ");b.map("wo","を");b.map("ga","が");b.map("gi","ぎ");b.map("gu","ぐ");b.map("ge","げ");b.map("go","ご");b.map("za","ざ");b.map("ji","じ");b.map("zu","ず");b.map("ze","ぜ");b.map("zo","ぞ");b.map("da","だ");b.map("de","で");b.map("do","ど");b.map("ba","ば");b.map("bi","び");b.map("bu","ぶ");b.map("be","べ");b.map("bo","ぼ");b.map("pa","ぱ");b.map("pi","ぴ");b.map("pu","ぷ");b.map("pe","ぺ");b.map("po","ぽ");b.map("hu","ふ");b.map("tu","つ");b.map("si","し");b.map("ti","ち");b.map("kya","きゃ");b.map("kyu","きゅ");b.map("kyo","きょ");b.map("sha","しゃ");b.map("shu","しゅ");b.map("sho","しょ");b.map("cha","ちゃ");b.map("chu","ちゅ");b.map("cho","ちょ");b.map("nya","にゃ");b.map("nyu","にゅ");b.map("nyo","にょ");b.map("hya","ひゃ");b.map("hyu","ひゅ");b.map("hyo","ひょ");b.map("mya","みゃ");b.map("myu","みゅ");b.map("myo","みょ");b.map("rya","りゃ");b.map("ryu","りゅ");b.map("ryo","りょ");b.map("gya","ぎゃ");b.map("gyu","ぎゅ");b.map("gyo","ぎょ");b.map("ja","じゃ");b.map("ju","じゅ");b.map("jo","じょ");b.map("bya","びゃ");b.map("byu","びゅ");b.map("byo","びょ");b.map("pya","ぴゃ");b.map("pyu","ぴゅ");b.map("pyo","ぴょ");b.map("xyu","っ");b.map("rr","っr");b.map("tt","っt");b.map("kk","っk");b.map("cc","っc");b.map("pp","っp");b.map("ss","っs");b.map("ww","っw");b.map("ss","っy");b.map("dd","っd");b.map("ff","っf");b.map("gg","っg");b.map("hh","っh");b.map("jj","っj");b.map("zz","っz");b.map("xx","っx");b.map("vv","っv");b.map("bb","っb");b.map("mm","っm");b.map("nn","ん");for(var h=0;h<p.length;h++){b.map("n"+p.charAt(h),"ん"+p.charAt(h))}var a=d("data-ime");for(var h=0;h<a.length;h++){if(a[h].dataset.ime=="hiragana"){a[h].addEventListener("keypress",f,false)}a[h].addEventListener("keyup",l,false);a[h].addEventListener("paste",k,false)}}};